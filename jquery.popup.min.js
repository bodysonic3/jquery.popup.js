/**
 * jquery.popup.js v. 1.1.2
 * author: Roma Maslennikov
 * link: https://github.com/romamaslennikov/jquery.popup.js
 **/
!function(t,o){function i(i,s){return this.obj=i,this._thisHeight=i.outerHeight(),this._window=t(o),this._thisTransformHideDefault="scale(0)",this._thisTransformShowDefault="scale(1)",this.popupBg=t("#popup-bg"),this.options=t.extend({background:"#000",position:"absolute",opacity:.5,zIndex:123456788,classAnimateShow:"",classAnimateHide:"",time:400,onPopupClose:function(){},onPopupInit:function(){}},s,!0),"object"!=typeof s&&s?this[s]():(this.init(),this.initOverlay(),this.onEvents()),this}i.prototype={init:function(){var t=this;return""!=this.options.classAnimateShow?(this.obj.removeClass(this.options.classAnimateHide),this.obj.css({position:this.options.position,WebkitAnimationDuration:this.options.time/1e3+"s",animationDuration:this.options.time/1e3+"s",zIndex:this.options.zIndex+1}).show().addClass("animated "+this.options.classAnimateShow)):this.obj.css({position:this.options.position,zIndex:this.options.zIndex+1,transform:this._thisTransformHideDefault,transition:"transform "+this.options.time/1e3+"s ease-out"}).fadeIn(this.options.time).css({transform:this._thisTransformShowDefault}),"fixed"==this.options.position?(this.popupPosition(),this._window.resize(function(){t.obj.css({transition:"left "+t.options.time/1e3+"s ease-out, top "+t.options.time/1e3+"s ease-out"}),t.popupPosition(),t.popupBgAddCss()})):"absolute"==this.options.position&&(this.popupPositionRezise(),t._window.resize(function(){t.obj.css({transition:"left "+t.options.time/1e3+"s ease-out, top "+t.options.time/1e3+"s ease-out"}),t.popupPositionRezise(),t.popupBgAddCss()})),this.options.onPopupInit(),this.obj},initOverlay:function(){var o=this;if(null==document.getElementById("popup-bg")&&t("<div/>",{id:"popup-bg",css:{position:"fixed",top:0,height:t(document).height(),width:t(document).width(),left:0,display:"none",background:this.options.background,opacity:this.options.opacity,filter:"alpha(opacity="+100*this.options.opacity+")",zIndex:this.options.zIndex,cursor:"pointer"}}).appendTo("body"),this.popupBg=t("#popup-bg"),void 0===this.popupBg.data("count")){this.popupBg.data("count",1);var i=this.popupBg.data("count")}else{var i=this.popupBg.data("count");this.popupBg.data("count",++i)}console.log(this.popupBg.data("count")),this.popupBg.show(),this.popupBgAddCss(),this._window.scroll(function(){o.popupBg.height(t(document).height()),o.popupBg.width(t(document).width())})},popupClose:function(){var t=this;""!=this.options.classAnimateHide?(this.obj.removeClass(this.options.classAnimateShow),this.obj.addClass("animated "+this.options.classAnimateHide),setTimeout(function(){t.obj.hide()},t.options.time)):(this.obj.fadeOut(this.options.time).css({transform:this._thisTransformHideDefault}),this.obj.removeClass("animated "+this.options.classAnimateShow)),1==this.popupBg.data("count")&&this.popupBg.fadeOut(this.options.time);var o=this.popupBg.data("count");return this.popupBg.data("count",--o),this.obj},close:function(){t("#popup-bg,.js-popup-close").trigger("click")},popupPosition:function(){return this.obj.css({top:this._window.height()/2-this.obj.outerHeight()/2,left:this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupPositionRezise:function(){var i=this.obj.offsetParent();return t(this.obj).outerHeight()>t(o).height()?this.obj.css({top:0}):this.obj.css({top:-i.offset().top+this._window.scrollTop()+this._window.height()/2-this.obj.outerHeight()/2}),this.obj.outerWidth()>this._window.width()?this.obj.css({left:-i.offset().left+this._window.scrollLeft()}):this.obj.css({left:-i.offset().left+this._window.scrollLeft()+this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupBgAddCss:function(){this.popupBg.height(t(document).height()),this.popupBg.width(t(document).width())},onEvents:function(){var o=this;t("#popup-bg").on({click:function(){o.popupClose(o.options.onPopupClose()),t(document).off("keydown")}}),t(".js-popup-close",o.obj).on({click:function(){o.popupClose(o.options.onPopupClose()),t(document).off("keydown")}}),t(document).off("keydown").on("keydown",function(t){27==t.keyCode&&o.popupClose(o.options.onPopupClose())})}},t.fn.popup=function(t){var o=this;return new i(o,t),this}}(jQuery,window);
/**
 * jquery.popup.js v. 1.1.1
 * author: Roma Maslennikov https://github.com/romamaslennikov/jquery.popup.js
 * used default: $('#elem').popup();
 * used options default:
 * background: '#000' // bg overlay
 * position: 'absolute' // position absolute or fixed
 * opacity: 0.5 // opacity overlay
 * zIndex: 123456788 // z-index overlay
 * classAnimateShow: '',  // animate.css, link https://daneden.github.io/animate.css/
 * classAnimateHide: '',  // animate.css, link https://daneden.github.io/animate.css/
 * scale - default css transform
 * time: 400 // time init
 * onPopupClose: function{} // popup close after function
 * onPopupInit: function{} // popup init after function
 **/
!function(t){function o(o,i){return this.obj=o,this._thisHeight=o.outerHeight(),this._window=t(window),this._thisTransformHideDefault="scale(0)",this._thisTransformShowDefault="scale(1)",this.popupBg=t("#popup-bg"),this.options=t.extend({background:"#000",position:"absolute",opacity:.5,zIndex:123456788,classAnimateShow:"",classAnimateHide:"",time:400,onPopupClose:function(){},onPopupInit:function(){}},i,!0),"object"!=typeof i&&i?this[i]():(this.init(),this.initOverlay(),this.onEvents()),this}o.prototype={init:function(){var t=this;return""!=this.options.classAnimateShow?(this.obj.removeClass(this.options.classAnimateHide),this.obj.css({position:this.options.position,WebkitAnimationDuration:this.options.time/1e3+"s",animationDuration:this.options.time/1e3+"s",zIndex:this.options.zIndex+1}).show().addClass("animated "+this.options.classAnimateShow)):this.obj.css({position:this.options.position,zIndex:this.options.zIndex+1,transform:this._thisTransformHideDefault,transition:"transform "+this.options.time/1e3+"s ease-out"}).fadeIn(this.options.time).css({transform:this._thisTransformShowDefault}),"fixed"==this.options.position?(this.popupPosition(),this._window.resize(function(){t.obj.css({transition:"left "+t.options.time/1e3+"s ease-out, top "+t.options.time/1e3+"s ease-out"}),t.popupPosition(),t.popupBgAddCss()})):"absolute"==this.options.position&&(this.popupPositionRezise(),t._window.resize(function(){t.obj.css({transition:"left "+t.options.time/1e3+"s ease-out, top "+t.options.time/1e3+"s ease-out"}),t.popupPositionRezise(),t.popupBgAddCss()})),this.options.onPopupInit(),this.obj},initOverlay:function(){var o=this;null==document.getElementById("popup-bg")&&t("<div/>",{id:"popup-bg",css:{position:"fixed",top:0,height:t(document).height(),width:t(document).width(),left:0,display:"none",background:this.options.background,opacity:this.options.opacity,filter:"alpha(opacity="+100*this.options.opacity+")",zIndex:this.options.zIndex,cursor:"pointer"}}).appendTo("body"),this.popupBg=t("#popup-bg"),this.popupBg.show(),this.popupBgAddCss(),this._window.scroll(function(){o.popupBg.height(t(document).height()),o.popupBg.width(t(document).width())})},popupClose:function(){var t=this;return""!=this.options.classAnimateHide?(this.obj.removeClass(this.options.classAnimateShow),this.obj.addClass("animated "+this.options.classAnimateHide),setTimeout(function(){t.obj.hide()},t.options.time)):(this.obj.fadeOut(this.options.time).css({transform:this._thisTransformHideDefault}),this.obj.removeClass("animated "+this.options.classAnimateShow)),this.popupBg.fadeOut(this.options.time),this.obj},close:function(){t("#popup-bg,.js-popup-close").click()},popupPosition:function(){return this.obj.css({top:this._window.height()/2-this.obj.outerHeight()/2,left:this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupPositionRezise:function(){var t=this.obj.offsetParent();return this._thisHeight>this._window.height()?this.obj.css({top:-t.offset().top+this._window.scrollTop()+5}):this.obj.css({top:-t.offset().top+this._window.scrollTop()+this._window.height()/2-this.obj.outerHeight()/2}),this.obj.outerWidth()>this._window.width()?this.obj.css({left:-t.offset().left+this._window.scrollLeft()+5}):this.obj.css({left:-t.offset().left+this._window.scrollLeft()+this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupBgAddCss:function(){this.popupBg.height(t(document).height()),this.popupBg.width(t(document).width())},onEvents:function(){var o=this;t("#popup-bg,.js-popup-close").off("click").on({click:function(){o.popupClose(o.options.onPopupClose()),t(document).off("keydown")}}),t(document).off("keydown").one("keydown",function(t){27==t.keyCode&&o.popupClose(o.options.onPopupClose())})}},t.fn.popup=function(t){var i=this;return new o(i,t),this}}(jQuery);